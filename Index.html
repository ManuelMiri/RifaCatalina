<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rifa a Beneficio de Catalina Rodríguez</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- SweetAlert2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f9f9f9;
      font-family: Arial, sans-serif;
    }
    .container {
      margin-top: 30px;
    }
    .number-button {
      margin: 5px;
    }
    .card {
      margin-top: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .btn-transfer {
      margin-top: 20px;
    }
    .btn-pay-now {
      background-color: #ff5a5f;
      color: white;
    }
    .btn-pay-now:hover {
      background-color: #ff3d4e;
    }
    .btn-reserved {
      background-color: #dc3545 !important;
      color: white !important;
      border-color: #dc3545 !important;
    }
    .premios-container {
      display: flex;
      justify-content: space-between;
    }
    .reserved-list {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="text-center mb-5">
      <h1 class="text-primary">Rifa a Beneficio de Catalina Rodríguez</h1>
      <p class="text-muted">Rut: 12.345.678-9 | Domicilio: Calle Esperanza 123, Ciudad</p>
      <p>
        Mi hermana Catalina sufrió un accidente automovilístico cuando bajaba de un auto y fue atropellada por una camioneta blanca. 
        Su mano quedó fracturada y necesita una operación urgente que como familia no podemos costear. 
        Organizamos esta rifa para recaudar fondos. ¡Tu ayuda será invaluable!
      </p>
    </div>

    <!-- Premios -->
    <div class="card">
      <div class="card-body">
        <h4 class="card-title text-center">Premios</h4>
        <div class="premios-container">
          <ul>
            <li>Premio 1: Televisor Smart TV</li>
            <li>Premio 2: Bicicleta de montaña</li>
            <li>Premio 3: Tablet de última generación</li>
            <li>Premio 4: Set de ollas</li>
            <li>Premio 5: Auriculares inalámbricos</li>
          </ul>
          <ul>
            <li>Premio 6: Canasta de alimentos</li>
            <li>Premio 7: Cena para dos personas</li>
            <li>Premio 8: Perfume importado</li>
            <li>Premio 9: Cafetera</li>
            <li>Premio 10: Gift card $50.000</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Números de Rifa -->
    <div class="card">
      <div class="card-body">
        <h4 class="card-title text-center">Elige tu número</h4>
        <div class="d-flex flex-wrap justify-content-center">
          SECTION - <!-- Botones de números de rifa -->
          <script>
            document.addEventListener("DOMContentLoaded", function() {
              const numberContainer = document.querySelector('.d-flex');
              const reservedList = document.querySelector('#reserved-list');
              const SECURITY_CODE = "1234"; // Código de seguridad para validación

              for (let i = 1; i <= 100; i++) {
                const button = document.createElement('button');
                button.className = 'btn btn-outline-primary number-button';
                button.textContent = i;

                // Función al presionar un número
                button.onclick = function() {
                  Swal.fire({
                    title: 'Código de seguridad',
                    input: 'password',
                    inputLabel: 'Por favor, ingresa el código de seguridad:',
                    inputPlaceholder: 'Introduce el código',
                    inputAttributes: {
                      maxlength: 10,
                      autocapitalize: 'off',
                      autocorrect: 'off'
                    },
                    confirmButtonText: 'Validar',
                    preConfirm: (code) => {
                      if (code !== SECURITY_CODE) {
                        Swal.showValidationMessage('Código de seguridad incorrecto');
                      } else {
                        return true;
                      }
                    }
                  }).then((result) => {
                    if (result.isConfirmed) {
                      Swal.fire({
                        title: `Número seleccionado: ${i}`,
                        html: `
                          <input type="text" id="nombre" class="swal2-input" placeholder="Nombre">
                          <input type="text" id="apellido" class="swal2-input" placeholder="Apellido">
                        `,
                        confirmButtonText: 'Guardar',
                        preConfirm: () => {
                          const nombre = Swal.getPopup().querySelector('#nombre').value;
                          const apellido = Swal.getPopup().querySelector('#apellido').value;

                          if (!nombre || !apellido) {
                            Swal.showValidationMessage('Por favor, ingresa tu nombre y apellido');
                          }

                          return { nombre, apellido };
                        }
                      }).then((result) => {
                        if (result.isConfirmed) {
                          document.querySelector('#selected-number').textContent = 
                            `Número ${i} reservado por: ${result.value.nombre} ${result.value.apellido}`;
                          document.querySelector('#upload-section').classList.remove('d-none');
                          // Cambia el estado del botón a reservado
                          button.classList.add('btn-reserved');
                          button.disabled = true;

                          // Agrega el registro a la lista de números reservados
                          const listItem = document.createElement('li');
                          listItem.textContent = `Número ${i} - ${result.value.nombre} ${result.value.apellido}`;
                          reservedList.appendChild(listItem);
                        }
                      });
                    }
                  });
                };

                numberContainer.appendChild(button);
              }
            });
          </script>
        </div>
        <p id="selected-number" class="text-center mt-3"></p>
      </div>
    </div>

    <!-- Lista de números reservados -->
    <div class="reserved-list">
      <h5>Números Reservados:</h5>
      <ul id="reserved-list"></ul>
    </div>

    <!-- Subir Foto o Botón de Transferencia -->
    <div id="upload-section" class="card d-none">
      <div class="card-body">
        <h4 class="card-title text-center">Completa tu compra</h4>
        <div class="text-center">
          <label class="form-label">Sube tu comprobante de transferencia:</label>
          <input type="file" class="form-control mb-3" accept="image/*">
          <button class="btn btn-success btn-transfer">Enviar comprobante</button>
          <p class="mt-3">O usa el botón de transferencia directa:</p>
          <a href="https://www.bancoestado.cl" target="_blank" class="btn btn-pay-now">Transferir ahora</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
</html>
